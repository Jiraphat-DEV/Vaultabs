<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Vaultabs</title>
  <style>
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;color:#111;background:#f7f7f8}
    .wrap{max-width:980px;margin:24px auto;padding:16px 20px}
    h2{margin:0;font-size:22px}
    .rowc{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .count{margin-left:auto;color:#666;font-size:13px}

    /* Inputs & buttons */
    input[type=text],select{border:1px solid #e5e7eb;background:#fff;border-radius:10px;padding:9px 12px;font-size:14px;outline:none}
    input[type=text]:focus,select:focus{border-color:#c7c9cf;box-shadow:0 0 0 3px rgba(0,0,0,0.03)}
    button,.btn{appearance:none;border:1px solid #e5e7eb;background:#fff;border-radius:10px;padding:10px 14px;font-size:14px;cursor:pointer;transition:all .15s ease}
    button:hover,.btn:hover{border-color:#c7c9cf}
    .btn-primary{background:#111;color:#fff;border-color:#111}
    .btn-primary:hover{filter:brightness(1.05)}
    .btn-danger{color:#b91c1c;border-color:#f0d2d2;background:#fff}
    .btn-danger:hover{background:#fde8e8;border-color:#efb5b5}
    #fileInput{display:none}

    /* Toolbar layout */
    .toolbar{display:grid;grid-template-columns:1fr;gap:12px;margin:14px 0}
    @media (min-width:860px){.toolbar{grid-template-columns:1fr 1fr}}
    .card{background:#fff;border:1px solid #eee;border-radius:12px;padding:12px}
    .card h3{margin:0 0 10px 0;font-size:13px;color:#666;font-weight:600;letter-spacing:.02em;text-transform:uppercase}
    .row{display:flex;flex-wrap:wrap;gap:8px}

    /* List & drop */
    .drop{border:2px dashed #ddd;border-radius:12px;padding:18px;text-align:center;color:#666;margin:8px 0;background:#fff}
    .drop.drag{border-color:#999;background:#fafafa}
    .list{list-style:none;margin:12px 0 0;padding:0;border:1px solid #eee;border-radius:12px;overflow:hidden;background:#fff}
    .rowitem{display:grid;grid-template-columns:32px 24px 1fr 160px 160px;gap:8px;align-items:center;padding:10px 12px;border-top:1px solid #eee}
    .rowitem:first-child{border-top:none}
    .fav{width:16px;height:16px}
    .link{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none;color:#0366d6}
    .link:hover{text-decoration:underline}
    .link.opened{color:#11914a}
    .muted{color:#666;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .tags{color:#444;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

    /* Zebra stripes for list rows */
    .list .rowitem:nth-child(even){background:#fafafa}
    .list .rowitem:hover{background:#f4f6f8}
    .rowitem.selected{background:#eef6ff}
    .list-header{display:grid;grid-template-columns:32px 24px 1fr 160px 160px;gap:8px;align-items:center;padding:8px 12px;background:#fff;border:1px solid #eee;border-bottom:none;border-radius:12px 12px 0 0;color:#666;font-size:12px;font-weight:600;letter-spacing:.02em;position:sticky;top:0;z-index:5}
    .list-header .sortable{cursor:pointer}
    .list-header [data-sort][data-active="true"]{color:#111}
    .chips{display:flex;gap:6px;flex-wrap:wrap}
    .chip{display:inline-flex;align-items:center;padding:2px 8px;border-radius:999px;background:#eef2ff;color:#273a8b;font-size:11px;border:1px solid #dbe4ff;cursor:pointer}
    .chip:hover{filter:brightness(0.98)}
    .badge{display:inline-flex;align-items:center;padding:2px 8px;border-radius:999px;background:#f3f4f6;color:#374151;font-size:11px;border:1px solid #e5e7eb;cursor:pointer}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="rowc">
      <h2>Vaultabs</h2>
      <span id="count" class="count"></span>
    </div>

    <div class="toolbar">
      <div class="card">
        <h3>Snapshot & IO</h3>
        <div class="row">
          <input id="name" type="text" placeholder="Snapshot name" style="min-width:220px">
          <button id="saveTabs" class="btn-primary">Save Open Tabs</button>
          <label for="fileInput" class="btn">Import JSON</label>
          <button id="exportAll">Export All</button>
          <button id="copyBtn">Copy URLs</button>
        </div>
      </div>

      <div class="card">
        <h3>Filter & Sort</h3>
        <div class="row">
          <input id="q" type="text" placeholder="Search title/url/domain" style="min-width:260px;flex:1">
          <input id="tq" type="text" placeholder="Filter tag" style="min-width:140px">
          <select id="sort">
            <option value="">Sort</option>
            <option value="title">Title</option>
            <option value="domain">Domain</option>
            <option value="url">URL</option>
            <option value="date">Date</option>
          </select>
        </div>
      </div>

      <div class="card">
        <h3>Selection</h3>
        <div class="row">
          <button id="selectAll">Select All</button>
          <button id="clearSel">Clear</button>
          <button id="removeSel" class="btn-danger">Remove Selected</button>
          <button id="removeDup">Remove Duplicates</button>
        </div>
      </div>

      <div class="card">
        <h3>Open & Export</h3>
        <div class="row">
          <button id="openSel" class="btn-primary">Open Selected</button>
          <button id="openAll">Open All</button>
          <label class="rowc" style="gap:6px"><input id="newWin" type="checkbox"> New window</label>
          <span style="flex:1"></span>
          <button id="exportSel">Export Selected</button>
        </div>
      </div>

      <div class="card" style="grid-column:1/-1">
        <h3>Tags</h3>
        <div class="row">
          <input id="tagAdd" type="text" placeholder="Tag" style="min-width:160px">
          <button id="addTag">Add tag to selected</button>
        </div>
      </div>
    </div>

    <input type="file" id="fileInput" accept="application/json" multiple>
    <div id="drop" class="drop">Drop JSON files here</div>
    <div class="list-header">
      <span><input id="masterChk" type="checkbox"></span>
      <span></span>
      <span class="sortable" data-sort="title">Title</span>
      <span class="sortable" data-sort="domain">Domain</span>
      <span>Tags / Source</span>
    </div>
    <ul id="tabsList" class="list"></ul>
  </div>
  <script src="script.js"></script>
</body>
</html>